/**
 * Fork & Spoon — Design Token System (D3 Cream & Nordic)
 *
 * Comprehensive CSS custom properties for light and dark themes.
 * Uses [data-theme='dark'] selector on <html> element.
 *
 * D3 Light palette:
 *   Base: Cream (#FAF8F6)
 *   Surface/Cards: White (#FFFFFF)
 *   Accent: Terracotta (#D4644E)
 *   Text: Warm brown (#2D2522)
 *
 * Dark palette (to be updated in Phase 3.7):
 *   Base: Warm dark (#1A1614)
 *   Surface/Cards: (#2D2522)
 *   Accent: Lightened terracotta
 *
 * Token naming: --fs-{category}-{variant}
 *   fs = Fork & Spoon namespace
 */

/* ============================================================
   LIGHT THEME (default) — D3 Cream & Nordic
   ============================================================ */
:root {
  /* Backgrounds */
  --fs-bg-base: #FAF8F6;           /* Cream */
  --fs-bg-surface: #FFFFFF;        /* Card/surface white */
  --fs-bg-elevated: #F5F5F4;       /* Slightly raised surfaces */
  --fs-bg-sunken: #FAF6F3;         /* Warm sunken areas */
  --fs-bg-overlay: rgba(0, 0, 0, 0.4);
  --fs-bg-card-inner: #FAF6F3;     /* Thumbnail placeholders, tag bg */

  /* Text */
  --fs-text-primary: #2D2522;      /* Dark warm brown */
  --fs-text-secondary: #7A6E66;    /* Warm muted */
  --fs-text-muted: #7A6E66;        /* Labels, placeholders */
  --fs-text-placeholder: #A8A29E;  /* Light placeholder */
  --fs-text-inverse: #FFFFFF;

  /* Accent (Terracotta) */
  --fs-accent: #D4644E;            /* Terracotta */
  --fs-accent-hover: #B84835;      /* Darker terracotta */
  --fs-accent-active: #9E3A28;     /* Darkest terracotta */
  --fs-accent-light: #FEF0E8;      /* Light terracotta tint */
  --fs-accent-muted: #E8C4B8;      /* Muted warm pink */
  --fs-accent-text: #B84835;       /* Small accent text (badges, links) */

  /* Borders */
  --fs-border-default: #C5B5AB;    /* Functional borders */
  --fs-border-muted: #E8DDD8;      /* Soft/decorative borders */
  --fs-border-strong: #A89888;     /* Emphasized borders */
  --fs-border-accent: #D4644E;     /* Terracotta accent border */
  --fs-border-decorative: #E8DDD8; /* Purely decorative dividers */

  /* Filter chips (D3) */
  --fs-filter-active-bg: #FEF0E8;
  --fs-filter-active-border: #E8C4B8;

  /* Shadows — warm-tinted */
  --fs-shadow-sm: 0 1px 2px rgba(45, 37, 34, 0.05);
  --fs-shadow-md: 0 4px 6px -1px rgba(45, 37, 34, 0.08), 0 2px 4px -2px rgba(45, 37, 34, 0.06);
  --fs-shadow-lg: 0 10px 15px -3px rgba(45, 37, 34, 0.1), 0 4px 6px -4px rgba(45, 37, 34, 0.06);

  /* Status colors */
  --fs-success: #16A34A;
  --fs-success-bg: #E8F5E2;        /* Warm green */
  --fs-error: #DC2626;
  --fs-error-bg: #FEF2F2;
  --fs-warning: #D4644E;           /* Terracotta */
  --fs-warning-bg: #FEF0E8;
  --fs-info: #2563EB;
  --fs-info-bg: #EFF6FF;

  /* Interactive states */
  --fs-hover-bg: rgba(45, 37, 34, 0.04);
  --fs-active-bg: rgba(45, 37, 34, 0.08);
  --fs-focus-ring: 0 0 0 2px #D4644E, 0 0 0 4px rgba(212, 100, 78, 0.3);

  /* Navigation */
  --fs-nav-bg: #FFFFFF;
  --fs-nav-border: transparent;
  --fs-nav-text: #3D3530;
  --fs-nav-text-active: #B84835;

  /* Cards */
  --fs-card-bg: #FFFFFF;
  --fs-card-border: #E8DDD8;       /* Soft border for cards */

  /* Input */
  --fs-input-bg: #FFFFFF;
  --fs-input-border: #C5B5AB;
  --fs-input-focus-border: #D4644E;

  /* Badge */
  --fs-badge-bg: #FAF6F3;
  --fs-badge-text: #7A6E66;

  /* Header (D3 — transparent, no amber) */
  --fs-warm-header-bg: transparent;
  --fs-warm-header-border: transparent;
  --fs-warm-header-btn-bg: #FFFFFF;
  --fs-warm-header-btn-border: #E8DDD8;

  /* Toast */
  --fs-toast-bg: #2D2522;
  --fs-toast-text: #FFFFFF;

  /* Skeleton loading */
  --fs-skeleton-base: #F5F5F4;
  --fs-skeleton-shine: #E8DDD8;

  /* Recency badges (D3 palette) */
  --fs-recency-green-bg: #E8F5E2;
  --fs-recency-green-text: #3D6A2A;
  --fs-recency-green-border: #C8E6BE;
  --fs-recency-yellow-bg: #FEF0E8;
  --fs-recency-yellow-text: #B84835;
  --fs-recency-yellow-border: #E8C4B8;
  --fs-recency-red-bg: #FEE2E2;
  --fs-recency-red-text: #DC2626;
  --fs-recency-red-border: #FECACA;
  --fs-recency-gray-bg: #F3F3F3;
  --fs-recency-gray-text: #656565;
  --fs-recency-gray-border: #E8DDD8;

  /* meta theme-color */
  --fs-meta-theme-color: #D4644E;
}

/* ============================================================
   DARK THEME (placeholder — full D3 dark in Phase 3.7)
   ============================================================ */
[data-theme='dark'] {
  /* Backgrounds */
  --fs-bg-base: #1A1614;           /* Warm dark brown */
  --fs-bg-surface: #2D2522;        /* Card/surface dark */
  --fs-bg-elevated: #3D3330;       /* Raised surfaces */
  --fs-bg-sunken: #1A1614;         /* Deepest dark */
  --fs-bg-overlay: rgba(0, 0, 0, 0.7);
  --fs-bg-card-inner: #3D3330;

  /* Text */
  --fs-text-primary: #FAF8F6;      /* Cream on dark */
  --fs-text-secondary: #D6D3D1;    /* Light warm gray */
  --fs-text-muted: #A8A29E;        /* Muted warm gray */
  --fs-text-placeholder: #78716C;
  --fs-text-inverse: #1A1614;

  /* Accent (Terracotta lightened for dark bg) */
  --fs-accent: #E87A64;            /* Lightened terracotta */
  --fs-accent-hover: #D4644E;      /* Standard terracotta */
  --fs-accent-active: #B84835;
  --fs-accent-light: rgba(212, 100, 78, 0.15);
  --fs-accent-muted: rgba(212, 100, 78, 0.25);
  --fs-accent-text: #E87A64;

  /* Borders */
  --fs-border-default: #3D3330;
  --fs-border-muted: #2D2522;
  --fs-border-strong: #57504C;
  --fs-border-accent: #E87A64;
  --fs-border-decorative: #3D3330;

  /* Filter chips */
  --fs-filter-active-bg: rgba(212, 100, 78, 0.15);
  --fs-filter-active-border: rgba(212, 100, 78, 0.3);

  /* Shadows (subtle on dark) */
  --fs-shadow-sm: 0 1px 2px rgba(0, 0, 0, 0.3);
  --fs-shadow-md: 0 4px 6px -1px rgba(0, 0, 0, 0.4), 0 2px 4px -2px rgba(0, 0, 0, 0.3);
  --fs-shadow-lg: 0 10px 15px -3px rgba(0, 0, 0, 0.5), 0 4px 6px -4px rgba(0, 0, 0, 0.4);

  /* Status colors (lightened for dark bg) */
  --fs-success: #4ADE80;
  --fs-success-bg: rgba(74, 222, 128, 0.1);
  --fs-error: #F87171;
  --fs-error-bg: rgba(248, 113, 113, 0.1);
  --fs-warning: #E87A64;
  --fs-warning-bg: rgba(212, 100, 78, 0.1);
  --fs-info: #60A5FA;
  --fs-info-bg: rgba(96, 165, 250, 0.1);

  /* Interactive states */
  --fs-hover-bg: rgba(255, 255, 255, 0.05);
  --fs-active-bg: rgba(255, 255, 255, 0.1);
  --fs-focus-ring: 0 0 0 2px #E87A64, 0 0 0 4px rgba(232, 122, 100, 0.3);

  /* Navigation */
  --fs-nav-bg: #2D2522;
  --fs-nav-border: #3D3330;
  --fs-nav-text: #A8A29E;
  --fs-nav-text-active: #E87A64;

  /* Cards */
  --fs-card-bg: #2D2522;
  --fs-card-border: #3D3330;

  /* Input */
  --fs-input-bg: #2D2522;
  --fs-input-border: #57504C;
  --fs-input-focus-border: #E87A64;

  /* Badge */
  --fs-badge-bg: #3D3330;
  --fs-badge-text: #D6D3D1;

  /* Header */
  --fs-warm-header-bg: transparent;
  --fs-warm-header-border: transparent;
  --fs-warm-header-btn-bg: #2D2522;
  --fs-warm-header-btn-border: #3D3330;

  /* Toast */
  --fs-toast-bg: #3D3330;
  --fs-toast-text: #FAF8F6;

  /* Skeleton loading */
  --fs-skeleton-base: #2D2522;
  --fs-skeleton-shine: #3D3330;

  /* Recency badge dark variants */
  --fs-recency-green-bg: #064E3B;
  --fs-recency-green-text: #6EE7B7;
  --fs-recency-green-border: #065F46;
  --fs-recency-yellow-bg: rgba(212, 100, 78, 0.15);
  --fs-recency-yellow-text: #E87A64;
  --fs-recency-yellow-border: rgba(212, 100, 78, 0.3);
  --fs-recency-red-bg: #7F1D1D;
  --fs-recency-red-text: #FCA5A5;
  --fs-recency-red-border: #991B1B;
  --fs-recency-gray-bg: #2D2522;
  --fs-recency-gray-text: #A8A29E;
  --fs-recency-gray-border: #3D3330;

  /* meta theme-color for dark */
  --fs-meta-theme-color: #1A1614;
}

/* ============================================================
   Bridge to shadcn/ui token system for dark mode.
   Components using bg-background, text-foreground etc.
   ============================================================ */
[data-theme='dark'] {
  --background: 16 10% 9%;         /* #1A1614 */
  --foreground: 30 29% 97%;        /* #FAF8F6 */
  --card: 16 14% 15%;              /* #2D2522 */
  --card-foreground: 30 29% 97%;
  --popover: 16 14% 15%;
  --popover-foreground: 30 29% 97%;
  --primary: 10 61% 57%;           /* Terracotta light */
  --primary-foreground: 0 0% 100%;
  --secondary: 16 14% 15%;
  --secondary-foreground: 30 29% 97%;
  --muted: 16 14% 15%;
  --muted-foreground: 24 6% 64%;
  --accent: 16 14% 15%;
  --accent-foreground: 30 29% 97%;
  --destructive: 0 63% 31%;
  --destructive-foreground: 30 29% 97%;
  --border: 12 8% 21%;
  --input: 12 8% 21%;
  --ring: 10 61% 57%;              /* Terracotta */
}

/* ============================================================
   Utility classes for quick adoption
   ============================================================ */
.fs-bg-base { background-color: var(--fs-bg-base); }
.fs-bg-surface { background-color: var(--fs-bg-surface); }
.fs-bg-elevated { background-color: var(--fs-bg-elevated); }
.fs-text-primary { color: var(--fs-text-primary); }
.fs-text-secondary { color: var(--fs-text-secondary); }
.fs-text-muted { color: var(--fs-text-muted); }
.fs-accent { color: var(--fs-accent); }
.fs-card {
  background-color: var(--fs-card-bg);
  border-color: var(--fs-card-border);
}

/* ============================================================
   GLOBAL DARK MODE OVERRIDES
   
   These ensure existing components that use hardcoded Tailwind 
   classes (bg-white, bg-gray-50, text-gray-900, etc.) still 
   look correct in dark mode without individual file edits.
   ============================================================ */

/* --- Background overrides --- */
[data-theme='dark'] .bg-white { background-color: var(--fs-bg-surface) !important; }
[data-theme='dark'] .bg-gray-50,
[data-theme='dark'] .bg-stone-50 { background-color: var(--fs-bg-sunken) !important; }
[data-theme='dark'] .bg-gray-100,
[data-theme='dark'] .bg-stone-100 { background-color: var(--fs-bg-elevated) !important; }

/* --- Text overrides --- */
[data-theme='dark'] .text-gray-900,
[data-theme='dark'] .text-stone-900 { color: var(--fs-text-primary) !important; }
[data-theme='dark'] .text-gray-800,
[data-theme='dark'] .text-stone-800 { color: var(--fs-text-primary) !important; }
[data-theme='dark'] .text-gray-700,
[data-theme='dark'] .text-stone-700 { color: var(--fs-text-secondary) !important; }
[data-theme='dark'] .text-gray-600,
[data-theme='dark'] .text-stone-600 { color: var(--fs-text-secondary) !important; }
[data-theme='dark'] .text-gray-500,
[data-theme='dark'] .text-stone-500 { color: var(--fs-text-muted) !important; }
[data-theme='dark'] .text-gray-400,
[data-theme='dark'] .text-stone-400 { color: var(--fs-text-placeholder) !important; }

/* --- Border overrides --- */
[data-theme='dark'] .border-gray-200,
[data-theme='dark'] .border-stone-200,
[data-theme='dark'] .border { border-color: var(--fs-border-default) !important; }
[data-theme='dark'] .border-gray-100,
[data-theme='dark'] .border-stone-100 { border-color: var(--fs-border-muted) !important; }
[data-theme='dark'] .border-gray-300,
[data-theme='dark'] .border-stone-300 { border-color: var(--fs-border-strong) !important; }

/* --- Hover overrides --- */
[data-theme='dark'] .hover\:bg-gray-50:hover,
[data-theme='dark'] .hover\:bg-stone-50:hover { background-color: var(--fs-hover-bg) !important; }
[data-theme='dark'] .hover\:bg-gray-100:hover,
[data-theme='dark'] .hover\:bg-stone-100:hover { background-color: var(--fs-active-bg) !important; }

/* --- Accent overrides (terracotta) --- */
[data-theme='dark'] .bg-amber-600 { background-color: var(--fs-accent) !important; }
[data-theme='dark'] .text-amber-600 { color: var(--fs-accent) !important; }
[data-theme='dark'] .text-amber-700 { color: var(--fs-accent) !important; }
[data-theme='dark'] .border-amber-600 { border-color: var(--fs-accent) !important; }

/* --- Status colors --- */
[data-theme='dark'] .bg-green-50,
[data-theme='dark'] .bg-green-100 { background-color: var(--fs-success-bg) !important; }
[data-theme='dark'] .text-green-600,
[data-theme='dark'] .text-green-700 { color: var(--fs-success) !important; }
[data-theme='dark'] .bg-blue-50,
[data-theme='dark'] .bg-blue-100 { background-color: var(--fs-info-bg) !important; }
[data-theme='dark'] .text-blue-600,
[data-theme='dark'] .text-blue-700 { color: var(--fs-info) !important; }
[data-theme='dark'] .border-blue-200 { border-color: rgba(96, 165, 250, 0.2) !important; }
[data-theme='dark'] .bg-red-50 { background-color: var(--fs-error-bg) !important; }
[data-theme='dark'] .text-red-600 { color: var(--fs-error) !important; }

/* --- Dividers & separators --- */
[data-theme='dark'] .divide-gray-200 > :not([hidden]) ~ :not([hidden]) {
  border-color: var(--fs-border-default) !important;
}

/* --- Shadows (soften in dark) --- */
[data-theme='dark'] .shadow-sm { box-shadow: var(--fs-shadow-sm) !important; }
[data-theme='dark'] .shadow-md,
[data-theme='dark'] .shadow { box-shadow: var(--fs-shadow-md) !important; }
[data-theme='dark'] .shadow-lg { box-shadow: var(--fs-shadow-lg) !important; }

/* --- Input/forms --- */
[data-theme='dark'] input,
[data-theme='dark'] textarea,
[data-theme='dark'] select {
  background-color: var(--fs-input-bg);
  border-color: var(--fs-input-border);
  color: var(--fs-text-primary);
}
[data-theme='dark'] input:focus,
[data-theme='dark'] textarea:focus,
[data-theme='dark'] select:focus {
  border-color: var(--fs-input-focus-border);
}
[data-theme='dark'] input::placeholder,
[data-theme='dark'] textarea::placeholder {
  color: var(--fs-text-placeholder);
}

/* --- Scrollbar (for Webkit browsers) --- */
[data-theme='dark'] ::-webkit-scrollbar {
  width: 6px;
  height: 6px;
}
[data-theme='dark'] ::-webkit-scrollbar-track {
  background: var(--fs-bg-base);
}
[data-theme='dark'] ::-webkit-scrollbar-thumb {
  background: var(--fs-border-strong);
  border-radius: 3px;
}

/* --- Body and root background --- */
[data-theme='dark'] body,
[data-theme='dark'] #root {
  background-color: var(--fs-bg-base) !important;
  color: var(--fs-text-primary) !important;
}

:root body,
:root #root {
  background-color: var(--fs-bg-base);
  color: var(--fs-text-primary);
}

/* colorScheme helps with native elements like scrollbars, form controls */
[data-theme='dark'] {
  color-scheme: dark;
}

/* ============================================================
   THEME TRANSITION (Sprint 21)
   
   Only applies after initial paint to avoid flash.
   The [data-theme-transition] attribute is set by useTheme after
   the first render (100ms delay).
   
   Respects prefers-reduced-motion: no transitions for users
   who prefer reduced motion.
   ============================================================ */
[data-theme-transition] *,
[data-theme-transition] *::before,
[data-theme-transition] *::after {
  transition-property: background-color, color, border-color, box-shadow, fill, stroke;
  transition-duration: 200ms;
  transition-timing-function: ease-in-out;
}

@media (prefers-reduced-motion: reduce) {
  [data-theme-transition] *,
  [data-theme-transition] *::before,
  [data-theme-transition] *::after {
    transition-duration: 0ms !important;
  }
}
