/**
 * Fork & Spoon — Design Token System (Sprint 20)
 *
 * Comprehensive CSS custom properties for light and dark themes.
 * Uses [data-theme='dark'] selector on <html> element.
 *
 * Dark palette (Design Spec V1.5):
 *   Base: Stone 900 (#1C1917)
 *   Surface/Cards: Stone 800 (#292524)
 *   Accent: Amber lightened (#FBBF24)
 *
 * Light palette:
 *   Base: White (#FFFFFF)
 *   Surface/Cards: White (#FFFFFF)
 *   Accent: Amber 600 (#D97706)
 *
 * Token naming: --fs-{category}-{variant}
 *   fs = Fork & Spoon namespace
 */

/* ============================================================
   LIGHT THEME (default)
   ============================================================ */
:root {
  /* Backgrounds */
  --fs-bg-base: #FFFFFF;
  --fs-bg-surface: #FFFFFF;
  --fs-bg-elevated: #F5F5F4;       /* Stone 100 */
  --fs-bg-sunken: #FAFAF9;         /* Stone 50 */
  --fs-bg-overlay: rgba(0, 0, 0, 0.5);

  /* Text */
  --fs-text-primary: #1C1917;      /* Stone 900 */
  --fs-text-secondary: #44403C;    /* Stone 700 */
  --fs-text-muted: #78716C;        /* Stone 500 */
  --fs-text-placeholder: #A8A29E;  /* Stone 400 */
  --fs-text-inverse: #FFFFFF;

  /* Accent (Amber brand) */
  --fs-accent: #D97706;            /* Amber 600 */
  --fs-accent-hover: #B45309;      /* Amber 700 */
  --fs-accent-active: #92400E;     /* Amber 800 */
  --fs-accent-light: #FEF3C7;      /* Amber 100 */
  --fs-accent-muted: #FDE68A;      /* Amber 200 */
  --fs-accent-text: #92400E;       /* Amber 800 — for text on light bg */

  /* Borders */
  --fs-border-default: #E7E5E4;    /* Stone 200 */
  --fs-border-muted: #F5F5F4;      /* Stone 100 */
  --fs-border-strong: #D6D3D1;     /* Stone 300 */
  --fs-border-accent: #D97706;     /* Amber 600 */

  /* Shadows */
  --fs-shadow-sm: 0 1px 2px rgba(0, 0, 0, 0.05);
  --fs-shadow-md: 0 4px 6px -1px rgba(0, 0, 0, 0.1), 0 2px 4px -2px rgba(0, 0, 0, 0.1);
  --fs-shadow-lg: 0 10px 15px -3px rgba(0, 0, 0, 0.1), 0 4px 6px -4px rgba(0, 0, 0, 0.1);

  /* Status colors */
  --fs-success: #16A34A;           /* Green 600 */
  --fs-success-bg: #F0FDF4;        /* Green 50 */
  --fs-error: #DC2626;             /* Red 600 */
  --fs-error-bg: #FEF2F2;          /* Red 50 */
  --fs-warning: #D97706;           /* Amber 600 */
  --fs-warning-bg: #FFFBEB;        /* Amber 50 */
  --fs-info: #2563EB;              /* Blue 600 */
  --fs-info-bg: #EFF6FF;           /* Blue 50 */

  /* Interactive states */
  --fs-hover-bg: rgba(0, 0, 0, 0.04);
  --fs-active-bg: rgba(0, 0, 0, 0.08);
  --fs-focus-ring: 0 0 0 2px #FBBF24, 0 0 0 4px rgba(251, 191, 36, 0.3);

  /* Navigation */
  --fs-nav-bg: #FFFFFF;
  --fs-nav-border: #E7E5E4;
  --fs-nav-text: #78716C;
  --fs-nav-text-active: #D97706;

  /* Cards */
  --fs-card-bg: #FFFFFF;
  --fs-card-border: #E7E5E4;

  /* Input */
  --fs-input-bg: #FFFFFF;
  --fs-input-border: #D6D3D1;
  --fs-input-focus-border: #D97706;

  /* Badge */
  --fs-badge-bg: #F5F5F4;
  --fs-badge-text: #44403C;

  /* Warm Header (Sprint 23 — Design Spec V1.6) */
  --fs-warm-header-bg: #FFFBEB;          /* Amber 50 */
  --fs-warm-header-border: #FDE68A;      /* Amber 200 */
  --fs-warm-header-btn-bg: #FFFFFF;
  --fs-warm-header-btn-border: #E7E5E4;  /* Stone 200 */

  /* Toast */
  --fs-toast-bg: #1C1917;
  --fs-toast-text: #FFFFFF;

  /* Skeleton loading */
  --fs-skeleton-base: #F5F5F4;
  --fs-skeleton-shine: #E7E5E4;

  /* Recency badge light variants (Design Spec V1.5) */
  --fs-recency-green-bg: #DCFCE7;
  --fs-recency-green-text: #16A34A;
  --fs-recency-green-border: #BBF7D0;
  --fs-recency-yellow-bg: #FEF9C3;
  --fs-recency-yellow-text: #CA8A04;
  --fs-recency-yellow-border: #FDE68A;
  --fs-recency-red-bg: #FEE2E2;
  --fs-recency-red-text: #DC2626;
  --fs-recency-red-border: #FECACA;
  --fs-recency-gray-bg: #F5F5F4;
  --fs-recency-gray-text: #78716C;
  --fs-recency-gray-border: #E7E5E4;

  /* meta theme-color for light */
  --fs-meta-theme-color: #D97706;
}

/* ============================================================
   DARK THEME
   ============================================================ */
[data-theme='dark'] {
  /* Backgrounds */
  --fs-bg-base: #1C1917;           /* Stone 900 */
  --fs-bg-surface: #292524;        /* Stone 800 */
  --fs-bg-elevated: #44403C;       /* Stone 700 */
  --fs-bg-sunken: #1C1917;         /* Stone 900 */
  --fs-bg-overlay: rgba(0, 0, 0, 0.7);

  /* Text */
  --fs-text-primary: #FAFAF9;      /* Stone 50 */
  --fs-text-secondary: #D6D3D1;    /* Stone 300 */
  --fs-text-muted: #A8A29E;        /* Stone 400 */
  --fs-text-placeholder: #78716C;  /* Stone 500 */
  --fs-text-inverse: #1C1917;

  /* Accent (Amber lightened for dark bg) */
  --fs-accent: #FBBF24;            /* Amber 400 */
  --fs-accent-hover: #F59E0B;      /* Amber 500 */
  --fs-accent-active: #D97706;     /* Amber 600 */
  --fs-accent-light: rgba(251, 191, 36, 0.15);
  --fs-accent-muted: rgba(251, 191, 36, 0.25);
  --fs-accent-text: #FBBF24;       /* Amber 400 — for text on dark bg */

  /* Borders */
  --fs-border-default: #44403C;    /* Stone 700 */
  --fs-border-muted: #292524;      /* Stone 800 */
  --fs-border-strong: #57534E;     /* Stone 600 */
  --fs-border-accent: #FBBF24;     /* Amber 400 */

  /* Shadows (subtle on dark) */
  --fs-shadow-sm: 0 1px 2px rgba(0, 0, 0, 0.3);
  --fs-shadow-md: 0 4px 6px -1px rgba(0, 0, 0, 0.4), 0 2px 4px -2px rgba(0, 0, 0, 0.3);
  --fs-shadow-lg: 0 10px 15px -3px rgba(0, 0, 0, 0.5), 0 4px 6px -4px rgba(0, 0, 0, 0.4);

  /* Status colors (lightened for dark bg) */
  --fs-success: #4ADE80;           /* Green 400 */
  --fs-success-bg: rgba(74, 222, 128, 0.1);
  --fs-error: #F87171;             /* Red 400 */
  --fs-error-bg: rgba(248, 113, 113, 0.1);
  --fs-warning: #FBBF24;           /* Amber 400 */
  --fs-warning-bg: rgba(251, 191, 36, 0.1);
  --fs-info: #60A5FA;              /* Blue 400 */
  --fs-info-bg: rgba(96, 165, 250, 0.1);

  /* Interactive states */
  --fs-hover-bg: rgba(255, 255, 255, 0.05);
  --fs-active-bg: rgba(255, 255, 255, 0.1);
  --fs-focus-ring: 0 0 0 2px #FBBF24, 0 0 0 4px rgba(251, 191, 36, 0.3);

  /* Navigation */
  --fs-nav-bg: #292524;
  --fs-nav-border: #44403C;
  --fs-nav-text: #A8A29E;
  --fs-nav-text-active: #FBBF24;

  /* Cards */
  --fs-card-bg: #292524;
  --fs-card-border: #44403C;

  /* Input */
  --fs-input-bg: #292524;
  --fs-input-border: #57534E;
  --fs-input-focus-border: #FBBF24;

  /* Badge */
  --fs-badge-bg: #44403C;
  --fs-badge-text: #D6D3D1;

  /* Warm Header (Sprint 23 — Design Spec V1.6) */
  --fs-warm-header-bg: rgba(251, 191, 36, 0.08);  /* Amber tint on dark */
  --fs-warm-header-border: #44403C;                /* Stone 700 */
  --fs-warm-header-btn-bg: #292524;                /* Stone 800 */
  --fs-warm-header-btn-border: #44403C;

  /* Toast */
  --fs-toast-bg: #44403C;
  --fs-toast-text: #FAFAF9;

  /* Skeleton loading */
  --fs-skeleton-base: #292524;
  --fs-skeleton-shine: #44403C;

  /* Recency badge dark variants (Design Spec V1.5) */
  --fs-recency-green-bg: #064E3B;
  --fs-recency-green-text: #6EE7B7;
  --fs-recency-green-border: #065F46;
  --fs-recency-yellow-bg: #713F12;
  --fs-recency-yellow-text: #FDE68A;
  --fs-recency-yellow-border: #854D0E;
  --fs-recency-red-bg: #7F1D1D;
  --fs-recency-red-text: #FCA5A5;
  --fs-recency-red-border: #991B1B;
  --fs-recency-gray-bg: #292524;
  --fs-recency-gray-text: #A8A29E;
  --fs-recency-gray-border: #44403C;

  /* meta theme-color for dark */
  --fs-meta-theme-color: #1C1917;
}

/* ============================================================
   Also bridge to the existing shadcn/ui token system so
   components using bg-background, text-foreground etc. still
   work. These override the :root vars from index.css.
   ============================================================ */
[data-theme='dark'] {
  --background: 20 14% 10%;        /* Stone 900 hsl */
  --foreground: 60 9% 98%;         /* Stone 50 hsl */
  --card: 24 10% 15%;              /* Stone 800 hsl */
  --card-foreground: 60 9% 98%;
  --popover: 24 10% 15%;
  --popover-foreground: 60 9% 98%;
  --primary: 60 9% 98%;
  --primary-foreground: 20 14% 10%;
  --secondary: 24 10% 15%;
  --secondary-foreground: 60 9% 98%;
  --muted: 24 10% 15%;
  --muted-foreground: 24 6% 64%;
  --accent: 24 10% 15%;
  --accent-foreground: 60 9% 98%;
  --destructive: 0 63% 31%;
  --destructive-foreground: 60 9% 98%;
  --border: 12 6% 27%;
  --input: 12 6% 27%;
  --ring: 48 97% 57%;              /* Amber 400 hsl */
}

/* ============================================================
   Utility classes for quick adoption
   ============================================================ */
.fs-bg-base { background-color: var(--fs-bg-base); }
.fs-bg-surface { background-color: var(--fs-bg-surface); }
.fs-bg-elevated { background-color: var(--fs-bg-elevated); }
.fs-text-primary { color: var(--fs-text-primary); }
.fs-text-secondary { color: var(--fs-text-secondary); }
.fs-text-muted { color: var(--fs-text-muted); }
.fs-accent { color: var(--fs-accent); }
.fs-card {
  background-color: var(--fs-card-bg);
  border-color: var(--fs-card-border);
}

/* ============================================================
   GLOBAL DARK MODE OVERRIDES
   
   These ensure existing components that use hardcoded Tailwind 
   classes (bg-white, bg-gray-50, text-gray-900, etc.) still 
   look correct in dark mode without individual file edits.
   ============================================================ */

/* --- Background overrides --- */
[data-theme='dark'] .bg-white { background-color: var(--fs-bg-surface) !important; }
[data-theme='dark'] .bg-gray-50,
[data-theme='dark'] .bg-stone-50 { background-color: var(--fs-bg-sunken) !important; }
[data-theme='dark'] .bg-gray-100,
[data-theme='dark'] .bg-stone-100 { background-color: var(--fs-bg-elevated) !important; }

/* --- Text overrides --- */
[data-theme='dark'] .text-gray-900,
[data-theme='dark'] .text-stone-900 { color: var(--fs-text-primary) !important; }
[data-theme='dark'] .text-gray-800,
[data-theme='dark'] .text-stone-800 { color: var(--fs-text-primary) !important; }
[data-theme='dark'] .text-gray-700,
[data-theme='dark'] .text-stone-700 { color: var(--fs-text-secondary) !important; }
[data-theme='dark'] .text-gray-600,
[data-theme='dark'] .text-stone-600 { color: var(--fs-text-secondary) !important; }
[data-theme='dark'] .text-gray-500,
[data-theme='dark'] .text-stone-500 { color: var(--fs-text-muted) !important; }
[data-theme='dark'] .text-gray-400,
[data-theme='dark'] .text-stone-400 { color: var(--fs-text-placeholder) !important; }

/* --- Border overrides --- */
[data-theme='dark'] .border-gray-200,
[data-theme='dark'] .border-stone-200,
[data-theme='dark'] .border { border-color: var(--fs-border-default) !important; }
[data-theme='dark'] .border-gray-100,
[data-theme='dark'] .border-stone-100 { border-color: var(--fs-border-muted) !important; }
[data-theme='dark'] .border-gray-300,
[data-theme='dark'] .border-stone-300 { border-color: var(--fs-border-strong) !important; }

/* --- Hover overrides --- */
[data-theme='dark'] .hover\:bg-gray-50:hover,
[data-theme='dark'] .hover\:bg-stone-50:hover { background-color: var(--fs-hover-bg) !important; }
[data-theme='dark'] .hover\:bg-gray-100:hover,
[data-theme='dark'] .hover\:bg-stone-100:hover { background-color: var(--fs-active-bg) !important; }

/* --- Amber accent (keep as-is, already looks good) --- */
[data-theme='dark'] .bg-amber-600 { background-color: #D97706 !important; }
[data-theme='dark'] .text-amber-600 { color: var(--fs-accent) !important; }
[data-theme='dark'] .text-amber-700 { color: var(--fs-accent) !important; }
[data-theme='dark'] .border-amber-600 { border-color: var(--fs-accent) !important; }

/* --- Status colors --- */
[data-theme='dark'] .bg-green-50,
[data-theme='dark'] .bg-green-100 { background-color: var(--fs-success-bg) !important; }
[data-theme='dark'] .text-green-600,
[data-theme='dark'] .text-green-700 { color: var(--fs-success) !important; }
[data-theme='dark'] .bg-blue-50,
[data-theme='dark'] .bg-blue-100 { background-color: var(--fs-info-bg) !important; }
[data-theme='dark'] .text-blue-600,
[data-theme='dark'] .text-blue-700 { color: var(--fs-info) !important; }
[data-theme='dark'] .border-blue-200 { border-color: rgba(96, 165, 250, 0.2) !important; }
[data-theme='dark'] .bg-red-50 { background-color: var(--fs-error-bg) !important; }
[data-theme='dark'] .text-red-600 { color: var(--fs-error) !important; }

/* --- Dividers & separators --- */
[data-theme='dark'] .divide-gray-200 > :not([hidden]) ~ :not([hidden]) {
  border-color: var(--fs-border-default) !important;
}

/* --- Shadows (soften in dark) --- */
[data-theme='dark'] .shadow-sm { box-shadow: var(--fs-shadow-sm) !important; }
[data-theme='dark'] .shadow-md,
[data-theme='dark'] .shadow { box-shadow: var(--fs-shadow-md) !important; }
[data-theme='dark'] .shadow-lg { box-shadow: var(--fs-shadow-lg) !important; }

/* --- Input/forms --- */
[data-theme='dark'] input,
[data-theme='dark'] textarea,
[data-theme='dark'] select {
  background-color: var(--fs-input-bg);
  border-color: var(--fs-input-border);
  color: var(--fs-text-primary);
}
[data-theme='dark'] input:focus,
[data-theme='dark'] textarea:focus,
[data-theme='dark'] select:focus {
  border-color: var(--fs-input-focus-border);
}
[data-theme='dark'] input::placeholder,
[data-theme='dark'] textarea::placeholder {
  color: var(--fs-text-placeholder);
}

/* --- Scrollbar (for Webkit browsers) --- */
[data-theme='dark'] ::-webkit-scrollbar {
  width: 6px;
  height: 6px;
}
[data-theme='dark'] ::-webkit-scrollbar-track {
  background: var(--fs-bg-base);
}
[data-theme='dark'] ::-webkit-scrollbar-thumb {
  background: var(--fs-border-strong);
  border-radius: 3px;
}

/* --- Body and root background --- */
[data-theme='dark'] body,
[data-theme='dark'] #root {
  background-color: var(--fs-bg-base) !important;
  color: var(--fs-text-primary) !important;
}

:root body,
:root #root {
  background-color: var(--fs-bg-base);
  color: var(--fs-text-primary);
}

/* colorScheme helps with native elements like scrollbars, form controls */
[data-theme='dark'] {
  color-scheme: dark;
}

/* ============================================================
   THEME TRANSITION (Sprint 21)
   
   Only applies after initial paint to avoid flash.
   The [data-theme-transition] attribute is set by useTheme after
   the first render (100ms delay).
   
   Respects prefers-reduced-motion: no transitions for users
   who prefer reduced motion.
   ============================================================ */
[data-theme-transition] *,
[data-theme-transition] *::before,
[data-theme-transition] *::after {
  transition-property: background-color, color, border-color, box-shadow, fill, stroke;
  transition-duration: 200ms;
  transition-timing-function: ease-in-out;
}

@media (prefers-reduced-motion: reduce) {
  [data-theme-transition] *,
  [data-theme-transition] *::before,
  [data-theme-transition] *::after {
    transition-duration: 0ms !important;
  }
}
